<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ—æµ·é“ä¸ƒå¤©å…­å¤œäº’å‹•è¡Œç¨‹å„€è¡¨æ¿</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: The application is designed as an interactive dashboard with three main views: "è¡Œç¨‹ç¸½è¦½" (Itinerary Overview), "èˆˆè¶£æ¢ç´¢" (Interest Explorer), and "äº¤é€šè³‡è¨Š" (Transport Hub). This structure was chosen to transform the static report into a dynamic planning tool. The "è¡Œç¨‹ç¸½è¦½" provides a chronological, expandable view of the trip. The "èˆˆè¶£æ¢ç´¢" allows thematic exploration based on the user's stated interests (anime, tech, nature), which is a significant usability improvement over a linear document. The "äº¤é€šè³‡è¨Š" centralizes critical transport links. This multi-view architecture allows users to approach their plan from different angles (by day or by interest), making the information more accessible and easier to synthesize. -->
    <!-- Visualization & Content Choices: 
        - Itinerary Overview: Report Info -> Daily schedule. Goal -> Organize. Viz -> Interactive expandable cards for each day. Interaction -> Click to expand/collapse. Justification -> Prevents information overload, allows focus on one day at a time. Method -> HTML/CSS/JS.
        - Transportation Options: Report Info -> Public transport vs. Taxi. Goal -> Compare. Viz -> Toggle buttons. Interaction -> Click to switch content. Justification -> Clear, direct comparison of alternatives. Method -> HTML/CSS/JS.
        - Interest Locations: Report Info -> Categorized recommendations. Goal -> Explore. Viz -> Filterable list of location cards. Interaction -> Click filter buttons to re-render the list. Justification -> Creates a personalized discovery tool aligned with user hobbies. Method -> HTML/CSS/JS.
        - Travel Time Analysis: Report Info -> Travel times for various legs. Goal -> Inform/Compare. Viz -> Bar Chart. Interaction -> Hover for tooltips showing daily travel time. Justification -> Provides a quick visual summary of which days involve more travel. Library -> Chart.js on Canvas.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #fdfcf9;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-btn-active {
            background-color: #0d9488;
            color: white;
        }
        .day-card {
            transition: all 0.3s ease-in-out;
            border-left-width: 4px;
        }
        .day-card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
        }
        .day-card.open .day-card-content {
            max-height: 4000px;
        }
        .transport-toggle-active {
            background-color: #14b8a6;
            color: white;
            border-color: #14b8a6;
        }
    </style>
</head>
<body class="text-stone-800">

    <div class="min-h-screen">
        <header class="bg-white shadow-sm sticky top-0 z-10">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="flex flex-col sm:flex-row justify-between items-center">
                    <div>
                        <h1 class="text-2xl font-bold text-teal-800">åŒ—æµ·é“ä¸ƒå¤©å…­å¤œäº’å‹•è¡Œç¨‹</h1>
                        <p class="text-sm text-stone-500 mt-1">æ‚¨çš„å€‹äººåŒ–æœ­å¹ŒåŠå‘¨é‚Šæ—…éŠè¨ˆç•«</p>
                    </div>
                    <nav id="main-nav" class="flex space-x-2 sm:space-x-4 mt-4 sm:mt-0 bg-stone-100 p-1 rounded-full">
                        <button data-view="overview" class="nav-btn px-4 py-2 text-sm font-medium rounded-full transition-colors duration-200 nav-btn-active">è¡Œç¨‹ç¸½è¦½</button>
                        <button data-view="interests" class="nav-btn px-4 py-2 text-sm font-medium rounded-full transition-colors duration-200">èˆˆè¶£æ¢ç´¢</button>
                        <button data-view="transport" class="nav-btn px-4 py-2 text-sm font-medium rounded-full transition-colors duration-200">äº¤é€šè³‡è¨Š</button>
                    </nav>
                </div>
            </div>
        </header>

        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <div id="overview-section" class="view-section">
                <div class="bg-white p-6 rounded-2xl shadow-lg mb-8 border border-stone-200">
                    <h2 class="text-xl font-bold mb-4 text-teal-700">æ¯æ—¥æ—…è¡Œæ™‚é–“åˆ†æ</h2>
                    <p class="text-sm text-stone-600 mb-4">é€™å¼µåœ–è¡¨é¡¯ç¤ºäº†æ¯æ—¥é ä¼°çš„äº¤é€šæ™‚é–“ï¼Œå¹«åŠ©æ‚¨å¿«é€Ÿäº†è§£å“ªäº›å¤©çš„è¡Œç¨‹æœƒæ¯”è¼ƒç·Šæ¹Šï¼Œäº¤é€šæ™‚é–“è¼ƒé•·ã€‚å°‡æ»‘é¼ æ‡¸åœåœ¨é•·æ¢ä¸Šå¯ä»¥æŸ¥çœ‹è©³ç´°çš„äº¤é€šå·¥å…·å’Œæ™‚é–“åˆ†é…ã€‚</p>
                    <div class="chart-container">
                        <canvas id="travelTimeChart"></canvas>
                    </div>
                </div>
                <div id="itinerary-container" class="space-y-4">
                </div>
            </div>

            <div id="interests-section" class="view-section hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg mb-8 border border-stone-200">
                    <h2 class="text-xl font-bold mb-2 text-teal-700">èˆˆè¶£æ¢ç´¢</h2>
                    <p class="text-sm text-stone-600 mb-4">æ ¹æ“šæ‚¨çš„å–œå¥½ï¼Œæˆ‘å€‘æ•´ç†äº†æ‰€æœ‰ç›¸é—œæ™¯é»ã€‚é»æ“Šä¸‹æ–¹çš„æŒ‰éˆ•ä¾†ç¯©é¸æ‚¨æ„Ÿèˆˆè¶£çš„é¡åˆ¥ï¼Œå¿«é€Ÿæ‰¾åˆ°æƒ³å»çš„åœ°æ–¹ï¼</p>
                    <div id="interest-filters" class="flex flex-wrap gap-2">
                        <button data-filter="all" class="interest-filter-btn bg-teal-600 text-white px-4 py-2 text-sm font-medium rounded-full">å…¨éƒ¨é¡¯ç¤º</button>
                        <button data-filter="è‡ªç„¶ç¾æ™¯" class="interest-filter-btn bg-white text-teal-700 border border-teal-200 px-4 py-2 text-sm font-medium rounded-full hover:bg-teal-50 transition">ğŸï¸ è‡ªç„¶ç¾æ™¯</button>
                        <button data-filter="å‹•æ¼«é›»ç©" class="interest-filter-btn bg-white text-teal-700 border border-teal-200 px-4 py-2 text-sm font-medium rounded-full hover:bg-teal-50 transition">ğŸ® å‹•æ¼«é›»ç©</button>
                        <button data-filter="3Cç”¢å“" class="interest-filter-btn bg-white text-teal-700 border border-teal-200 px-4 py-2 text-sm font-medium rounded-full hover:bg-teal-50 transition">ğŸ’» 3Cç”¢å“</button>
                        <button data-filter="ç¾é£Ÿå¸‚å ´" class="interest-filter-btn bg-white text-teal-700 border border-teal-200 px-4 py-2 text-sm font-medium rounded-full hover:bg-teal-50 transition">ğŸ£ ç¾é£Ÿå¸‚å ´</button>
                        <button data-filter="è³¼ç‰©" class="interest-filter-btn bg-white text-teal-700 border border-teal-200 px-4 py-2 text-sm font-medium rounded-full hover:bg-teal-50 transition">ğŸ›ï¸ è³¼ç‰©</button>
                    </div>
                </div>
                <div id="interest-locations-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </div>

            <div id="transport-section" class="view-section hidden">
                 <div class="bg-white p-6 rounded-2xl shadow-lg border border-stone-200">
                    <h2 class="text-xl font-bold mb-4 text-teal-700">ä¸»è¦äº¤é€šè³‡è¨Šç«™</h2>
                    <p class="text-sm text-stone-600 mb-6">åœ¨åŒ—æµ·é“è‡ªç”±è¡Œï¼ŒæŒæ¡å³æ™‚äº¤é€šè³‡è¨Šéå¸¸é‡è¦ã€‚é€™è£¡åŒ¯ç¸½äº†æœ¬æ¬¡è¡Œç¨‹ä¸­æœ€é—œéµçš„äº¤é€šç‡Ÿé‹å•†å®˜æ–¹ç¶²ç«™ï¼Œå»ºè­°æ‚¨åœ¨å‡ºç™¼å‰æˆ–æ—…é€”ä¸­éš¨æ™‚æŸ¥é–±ï¼Œä»¥ç²å–æœ€æ–°çš„åˆ—è»Šã€å·´å£«æ™‚åˆ»èˆ‡é‹è¡Œç‹€æ³ã€‚</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <a href="https://www.jrhokkaido.co.jp/" target="_blank" class="block p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors duration-200">
                            <h3 class="font-semibold text-teal-800">JRåŒ—æµ·é“</h3>
                            <p class="text-sm text-stone-600 mt-1">æŸ¥è©¢ç«è»Šæ™‚åˆ»ã€ç¥¨åƒ¹åŠJR Passç›¸é—œè³‡è¨Šã€‚</p>
                        </a>
                        <a href="https://www.city.sapporo.jp/st/" target="_blank" class="block p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors duration-200">
                            <h3 class="font-semibold text-teal-800">æœ­å¹Œå¸‚äº¤é€šå±€</h3>
                            <p class="text-sm text-stone-600 mt-1">æŸ¥è©¢åœ°éµã€å¸‚é›»ï¼ˆè·¯é¢é›»è»Šï¼‰çš„è·¯ç·šèˆ‡ç‡Ÿé‹è³‡è¨Šã€‚</p>
                        </a>
                        <a href="https://www.chuo-bus.co.jp/" target="_blank" class="block p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors duration-200">
                            <h3 class="font-semibold text-teal-800">åŒ—æµ·é“ä¸­å¤®å·´å£«</h3>
                            <p class="text-sm text-stone-600 mt-1">æŸ¥è©¢å‰å¾€éƒŠå€æ™¯é»ï¼ˆå¦‚ç¾Šä¹‹ä¸˜ã€æ”¯ç¬æ¹–ï¼‰çš„å·´å£«è·¯ç·šèˆ‡æ™‚åˆ»è¡¨ã€‚</p>
                        </a>
                        <a href="https://www.jotetsu.co.jp/" target="_blank" class="block p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors duration-200">
                            <h3 class="font-semibold text-teal-800">ã˜ã‚‡ã†ã¦ã¤å·´å£« (Jotetsu Bus)</h3>
                            <p class="text-sm text-stone-600 mt-1">ä¸»è¦ç‡Ÿé‹å®šå±±æºªæº«æ³‰ç·šè·¯ï¼Œå¯æŸ¥è©¢é ç´„åˆ¶çš„æ²³ç«¥è™Ÿè³‡è¨Šã€‚</p>
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const itineraryData = [
            {
                day: 1,
                title: "æŠµé”æœ­å¹Œèˆ‡å¸‚å€æ¼«æ­¥",
                themeColor: "border-sky-500",
                travelTime: { total: 82, breakdown: { "JR": 40, "åœ°éµ": 5, "æ­¥è¡Œ": 37 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "æŠµé”æ–°åƒæ­²æ©Ÿå ´ & å‰å¾€é…’åº—",
                        description: "æ­ä¹˜JRå¿«é€ŸAirportè™Ÿç´„37-40åˆ†é˜ç›´é”JRæœ­å¹Œè»Šç«™ã€‚å¾è»Šç«™æ­¥è¡Œç´„10åˆ†é˜æˆ–åˆ©ç”¨åœ°ä¸‹é€šé“å‰å¾€åŒ—æµ·é“æœ­å¹Œæ ¼è˜­å¤§é…’åº—ã€‚",
                        transport: {
                            public: { icon: "ğŸš†", details: "JRå¿«é€ŸAirportè™Ÿ (ç´„40åˆ†é˜) â†’ æ­¥è¡Œ (ç´„10åˆ†é˜)" },
                            taxi: { icon: "ğŸš•", details: "æ©Ÿå ´å·´å£«ç›´é”é…’åº— (ç´„80-100åˆ†é˜, Â¥1,300) æˆ– è¨ˆç¨‹è»Š (è²»ç”¨é«˜æ˜‚)" }
                        }
                    },
                    {
                        time: "ä¸­åˆ",
                        title: "äºŒæ¢å¸‚å ´åˆé¤",
                        description: "å“åšæ–°é®®çš„æµ·ç”¢ã€‚",
                        transport: {
                            public: { icon: "ğŸš¶", details: "å¾é…’åº—æ­¥è¡Œè‡³åœ°éµå¤§é€šç«™ (ç´„5åˆ†é˜)ï¼Œæ­ä¹˜åœ°éµå—åŒ—ç·šè‡³ã€Œå¤§é€šç«™ã€ï¼Œå†æ­¥è¡Œç´„7åˆ†é˜ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æ­ä¹˜è¨ˆç¨‹è»Šç´„5-10åˆ†é˜ã€‚" }
                        }
                    },
                    {
                        time: "ä¸‹åˆ",
                        title: "ä¸­å³¶å…¬åœ’æ•£æ­¥",
                        description: "äº«å—å¸‚å€ç¶ æ´²çš„å¯§éœæ™‚å…‰ã€‚",
                        transport: {
                            public: { icon: "ğŸš‡", details: "å¾äºŒæ¢å¸‚å ´æ­¥è¡Œè‡³åœ°éµå¤§é€šç«™ï¼Œæ­ä¹˜åœ°éµå—åŒ—ç·šè‡³ã€Œä¸­å³¶å…¬åœ’ç«™ã€ä¸‹è»Šå³é”ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾äºŒæ¢å¸‚å ´æ­ä¹˜è¨ˆç¨‹è»Šç´„10åˆ†é˜ã€‚" }
                        }
                    }
                ]
            },
            {
                day: 2,
                title: "æœ­å¹Œç¥å®®èˆ‡è‡ªç„¶é¢¨å…‰",
                themeColor: "border-emerald-500",
                travelTime: { total: 40, breakdown: { "åœ°éµ": 10, "å·´å£«": 5, "æ­¥è¡Œ": 25 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "åŒ—æµ·é“ç¥å®®åƒæ‹œ",
                        description: "æ„Ÿå—èŠåš´æ°›åœã€‚",
                        transport: {
                            public: { icon: "ğŸš‡", details: "å¾é…’åº—æ­¥è¡Œè‡³åœ°éµå¤§é€šç«™ï¼Œæ­ä¹˜æ±è¥¿ç·šè‡³ã€Œåœ“å±±å…¬åœ’ç«™ã€ã€‚å‡ºç«™å¾Œç©¿è¶Šåœ“å±±å…¬åœ’æ­¥è¡Œç´„15åˆ†é˜ã€‚æˆ–è½‰ä¹˜JRåŒ—æµ·é“å·´å£«ã€Œå††14ã€å††15è™Ÿã€ç´„5åˆ†é˜è‡³ã€Œç¥å®®å‰ã€ç«™ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æ­ä¹˜è¨ˆç¨‹è»Šç´„15-20åˆ†é˜ã€‚" }
                        }
                    },
                    {
                        time: "ä¸‹åˆ",
                        title: "å††å±±å…¬åœ’æ¼«æ­¥",
                        description: "æ¬£è³å››å­£è‡ªç„¶æ™¯è‰²ã€‚",
                        transport: {
                            public: { icon: "ğŸš¶", details: "èˆ‡åŒ—æµ·é“ç¥å®®ç›¸é„°ï¼Œæ­¥è¡Œå³å¯æŠµé”ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å…¬åœ’ç¯„åœå»£å¤§ï¼Œå¯åœ¨å…¬åœ’ä¸åŒå…¥å£é–“çŸ­ç¨‹ç§»å‹•ã€‚" }
                        }
                    }
                ]
            },
            {
                day: 3,
                title: "ç©ä¸¹åŠå³¶ä¸€æ—¥éŠ (ç¥å¨å²¬)",
                themeColor: "border-blue-500",
                travelTime: { total: 360, breakdown: { "JR": 90, "å·´å£«": 250, "æ­¥è¡Œ": 20 } },
                activities: [
                    {
                        time: "å…¨æ—¥",
                        title: "ç¥å¨å²¬ & ç©ä¸¹è—æµ·æ™¯",
                        description: "äº¤é€šè¼ƒè¤‡é›œä¸”è€—æ™‚ï¼Œå»ºè­°ææ—©å‡ºç™¼ã€‚å¯å“åšå¤å­£é™å®š(6-8æœˆ)çš„ç”Ÿæµ·è†½ä¸¼ã€‚",
                        transport: {
                            public: { icon: "ğŸšŒ", details: "JRæœ­å¹Œâ†’JRå°æ¨½ (ç´„45åˆ†) â†’ ä¸­å¤®å·´å£«â†’ç©ä¸¹ç¾åœ‹ (ç´„80åˆ†) â†’ **[éœ€é ç´„]** ç©ä¸¹ç”ºç”Ÿæ´»äº¤é€šå·´å£«â†’ç¥å¨å²¬ (ç´„65åˆ†)ã€‚å›ç¨‹äº¦ç„¶ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾JRå°æ¨½è»Šç«™ç›´æ¥æ­ä¹˜è¨ˆç¨‹è»Šå‰å¾€ï¼Œè²»ç”¨é«˜æ˜‚ä½†çœæ™‚ã€‚æˆ–æ­å·´å£«åˆ°ã€Œç©ä¸¹ç¾åœ‹ã€å¾Œå†è½‰ä¹˜è¨ˆç¨‹è»Šã€‚" }
                        },
                        note: "å‰å¾€ç¥å¨å²¬çš„å·´å£«éœ€åœ¨å‰ä¸€å¤©ä¸‹åˆ5é»å‰é›»è©±é ç´„ (0135-44-3830)ã€‚"
                    }
                ]
            },
            {
                day: 4,
                title: "å¸‚å ´å·¡ç¦®èˆ‡è‡ªç”±æ´»å‹•",
                themeColor: "border-amber-500",
                travelTime: { total: 60, breakdown: { "åœ°éµ": 30, "æ­¥è¡Œ": 30 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "æœ­å¹Œå ´å¤–å¸‚å ´æ—©é¤",
                        description: "äº«ç”¨æœ€æ–°é®®çš„æµ·é®®ã€‚",
                        transport: {
                            public: { icon: "ğŸš‡", details: "æ­ä¹˜åœ°éµæ±è¥¿ç·šè‡³ã€ŒäºŒåå››è»’ç«™ã€ï¼Œæ­¥è¡Œç´„7-10åˆ†é˜ã€‚æˆ–æ­JRè‡³ã€Œæ¡‘åœ’ç«™ã€ï¼Œæ­¥è¡Œç´„9-13åˆ†é˜ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æ­ä¹˜è¨ˆç¨‹è»Šç´„15åˆ†é˜ã€‚" }
                        }
                    },
                    {
                        time: "ä¸‹åˆ",
                        title: "å¸‚å€è‡ªç”±æ´»å‹• (å€‹äººåŒ–æ¨è–¦)",
                        description: "å¯æ¢ç´¢å‹•æ¼«ã€3Cæˆ–è³¼ç‰©æ™¯é»ã€‚",
                        transport: {
                            public: { icon: "ğŸš¶", details: "å¤šæ•¸æ¨è–¦é»ä½æ–¼å¤§é€šæˆ–æœ­å¹Œè»Šç«™å‘¨é‚Šï¼Œå¯å¾é…’åº—æ­¥è¡Œæˆ–æ­ä¹˜åœ°éµè¼•é¬†æŠµé”ã€‚" },
                            taxi: { icon: "ğŸš•", details: "åœ¨å¸‚ä¸­å¿ƒå„é»ä¹‹é–“çŸ­ç¨‹ç§»å‹•å¾ˆæ–¹ä¾¿ã€‚" }
                        }
                    }
                ]
            },
            {
                day: 5,
                title: "æœ­å¹Œå…©å¤§å±•æœ›å°",
                themeColor: "border-indigo-500",
                travelTime: { total: 90, breakdown: { "åœ°éµ": 20, "å·´å£«": 30, "å¸‚é›»": 20, "æ­¥è¡Œ": 20 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "å®®ä¹‹æ£®å¤§å€‰å±±å±•æœ›å°",
                        description: "æ„Ÿå—è·³å°æ»‘é›ªçš„éœ‡æ’¼ã€‚",
                        transport: {
                            public: { icon: "ğŸšŒ", details: "åœ°éµæ±è¥¿ç·šè‡³ã€Œåœ“å±±å…¬åœ’ç«™ã€ï¼Œè½‰ä¹˜JRåŒ—æµ·é“å·´å£«ã€Œãã‚‰ã¾ã‚‹ã€è™Ÿç´„15åˆ†é˜ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æ­ä¹˜è¨ˆç¨‹è»Šç´„20-25åˆ†é˜ã€‚" }
                        }
                    },
                    {
                        time: "å‚æ™š",
                        title: "è—»å²©å±±å¤œæ™¯",
                        description: "æ¬£è³æ—¥æœ¬æ–°ä¸‰å¤§å¤œæ™¯ã€‚",
                        transport: {
                            public: { icon: "ğŸš ", details: "æ­ä¹˜å¸‚é›»è‡³ã€Œçºœè»Šå…¥å£ã€ç«™ï¼Œè½‰ä¹˜å…è²»æ¥é§å·´å£«æˆ–æ­¥è¡Œ7åˆ†é˜ã€‚æˆ–å¾åœ“å±±å…¬åœ’ç«™æ­ä¹˜å·´å£«ã€Œå¾ªç’°åœ“11è™Ÿã€ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æˆ–å¤§å€‰å±±ç›´æ¥æ­ä¹˜è¨ˆç¨‹è»Šè‡³çºœè»Šç«™ï¼Œæ–¹ä¾¿å¿«æ·ã€‚" }
                        },
                        note: "å¤œæ™¯ç†±é–€ï¼Œå»ºè­°ææ—©å‰å¾€ã€‚çºœè»Šç¥¨åƒ¹æˆäººÂ¥2,100ã€‚"
                    }
                ]
            },
            {
                day: 6,
                title: "é–‹æ‹“ç²¾ç¥èˆ‡å¯æ„›ç¾Šç¾¤",
                themeColor: "border-lime-500",
                travelTime: { total: 60, breakdown: { "åœ°éµ": 20, "å·´å£«": 20, "æ­¥è¡Œ": 20 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "æœ­å¹Œç¾Šä¹‹ä¸˜å±•æœ›å°",
                        description: "èˆ‡ç‰§ç¾Šç¾¤å’Œå…‹æ‹‰å…‹åšå£«é›•åƒåˆå½±ã€‚",
                        transport: {
                            public: { icon: "ğŸšŒ", details: "åœ°éµæ±è±ç·šè‡³ã€Œç¦ä½ç«™ã€ï¼Œè½‰ä¹˜ä¸­å¤®å·´å£«ã€Œç¦84è™Ÿã€è‡³çµ‚é»ç«™ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾é…’åº—æ­ä¹˜è¨ˆç¨‹è»Šç´„25-30åˆ†é˜ã€‚" }
                        }
                    },
                    {
                        time: "ä¸‹åˆ",
                        title: "æœ­å¹Œè»Šç«™å‘¨é‚Šè‡ªç”±æ´»å‹•",
                        description: "è³¼ç‰©æˆ–æ¢ç´¢æ¨è–¦çš„éŠæˆ²ä¸­å¿ƒã€‚",
                        transport: {
                            public: { icon: "ğŸš¶", details: "å¾ç¾Šä¹‹ä¸˜æ­å·´å£«å’Œåœ°éµè¿”å›æœ­å¹Œè»Šç«™ï¼Œå‘¨é‚Šå•†å ´å‡å¯æ­¥è¡ŒæŠµé”ã€‚" },
                            taxi: { icon: "ğŸš•", details: "åœ¨å¸‚ä¸­å¿ƒå„é»ä¹‹é–“çŸ­ç¨‹ç§»å‹•å¾ˆæ–¹ä¾¿ã€‚" }
                        }
                    }
                ]
            },
            {
                day: 7,
                title: "æ”¯ç¬æ¹–ç¾æ™¯èˆ‡å•Ÿç¨‹è¿”å®¶",
                themeColor: "border-rose-500",
                travelTime: { total: 100, breakdown: { "å·´å£«": 45, "JR": 40, "æ­¥è¡Œ": 15 } },
                activities: [
                    {
                        time: "ä¸Šåˆ",
                        title: "æ”¯ç¬æ¹–",
                        description: "æ—¥æœ¬æœ€åŒ—çš„ä¸å‡æ¹–ï¼Œä»¥æ¸…æ¾ˆæ¹–æ°´èåã€‚",
                        transport: {
                            public: { icon: "ğŸšŒ", details: "å¾æœ­å¹Œè»Šç«™æ­ä¹˜JRè‡³åƒæ­²ç«™ï¼Œå†è½‰ä¹˜åŒ—æµ·é“ä¸­å¤®å·´å£«å‰å¾€æ”¯ç¬æ¹–æº«æ³‰ (å–®ç¨‹ç´„45åˆ†é˜)ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾æœ­å¹Œå¸‚å€æ­ä¹˜è¨ˆç¨‹è»Šï¼Œè»Šç¨‹ç´„80åˆ†é˜ï¼Œè²»ç”¨éå¸¸æ˜‚è²´ (é ä¼°è¶…é Â¥10,000)ã€‚" }
                        },
                        note: "è«‹å‹™å¿…ç•™æ„å·´å£«å’ŒJRçš„å›ç¨‹æ™‚é–“ï¼Œç¢ºä¿æœ‰è¶³å¤ æ™‚é–“å‰å¾€æ©Ÿå ´ã€‚"
                    },
                    {
                        time: "ä¸‹åˆ",
                        title: "å‰å¾€æ–°åƒæ­²æ©Ÿå ´",
                        description: "å¾æ”¯ç¬æ¹–è¿”å›å¾Œï¼Œå¾JRåƒæ­²ç«™æ­ä¹˜JRå¿«é€ŸAirportè™Ÿå‰å¾€æ©Ÿå ´ï¼Œæº–å‚™æ­æ©Ÿè¿”å®¶ã€‚",
                        transport: {
                            public: { icon: "ğŸš†", details: "å¾JRåƒæ­²ç«™æ­ä¹˜JRå¿«é€ŸAirportè™Ÿå‰å¾€æ©Ÿå ´ã€‚" },
                            taxi: { icon: "ğŸš•", details: "å¾åƒæ­²ç«™æˆ–æ”¯ç¬æ¹–æ­ä¹˜è¨ˆç¨‹è»Šå‰å¾€æ©Ÿå ´ï¼Œæ–¹ä¾¿ä½†è²»ç”¨é«˜ã€‚" }
                        }
                    }
                ]
            }
        ];

        const locationsData = [
            { name: "ä¸­å³¶å…¬åœ’", category: "è‡ªç„¶ç¾æ™¯", day: 1, description: "ä½æ–¼å¸‚ä¸­å¿ƒçš„å»£é—Šå…¬åœ’ï¼Œå››å­£æ™¯è‰²åˆ†æ˜ã€‚" },
            { name: "åŒ—æµ·é“ç¥å®®", category: "è‡ªç„¶ç¾æ™¯", day: 2, description: "æœ­å¹Œæœ€é‡è¦çš„ç¥ç¤¾ï¼Œè¢«å¤§ç‰‡æ£®æ—ç’°ç¹ã€‚" },
            { name: "å††å±±å…¬åœ’", category: "è‡ªç„¶ç¾æ™¯", day: 2, description: "é„°è¿‘ç¥å®®ï¼Œæ˜¯è³æ«»åæ‰€ï¼Œä¹Ÿæœ‰å‹•ç‰©åœ’ã€‚" },
            { name: "ç¥å¨å²¬", category: "è‡ªç„¶ç¾æ™¯", day: 3, description: "ä»¥ã€Œç©ä¸¹è—ã€çµ•æ™¯èåï¼Œæ™¯è‰²å£¯éº—ã€‚" },
            { name: "å®®ä¹‹æ£®å¤§å€‰å±±å±•æœ›å°", category: "è‡ªç„¶ç¾æ™¯", day: 5, description: "å¯ä¿¯ç°æœ­å¹Œå¸‚æ™¯ä¸¦æ„Ÿå—å†¬å­£é‹å‹•çš„é­…åŠ›ã€‚" },
            { name: "è—»å²©å±±", category: "è‡ªç„¶ç¾æ™¯", day: 5, description: "æ¬£è³è¢«è­½ç‚ºæ—¥æœ¬æ–°ä¸‰å¤§å¤œæ™¯ä¹‹ä¸€çš„æœ­å¹Œå¤œæ™¯ã€‚" },
            { name: "æœ­å¹Œç¾Šä¹‹ä¸˜å±•æœ›å°", category: "è‡ªç„¶ç¾æ™¯", day: 6, description: "ç”°åœ’é¢¨å…‰ï¼Œå¯è¦‹ç¾Šç¾¤æ‚ é–’åƒè‰ã€‚" },
            { name: "æ”¯ç¬æ¹–", category: "è‡ªç„¶ç¾æ™¯", day: 7, description: "æ—¥æœ¬æœ€åŒ—çš„ä¸å‡æ¹–ï¼Œæ°´è³ªæ¥µç‚ºæ¸…æ¾ˆã€‚" },
            { name: "äºŒæ¢å¸‚å ´", category: "ç¾é£Ÿå¸‚å ´", day: 1, description: "æ­·å²æ‚ ä¹…çš„å¸‚å ´ï¼Œå¯å“åšæ–°é®®æµ·ç”¢ä¸¼é£¯ã€‚" },
            { name: "æœ­å¹Œå ´å¤–å¸‚å ´", category: "ç¾é£Ÿå¸‚å ´", day: 4, description: "è¦æ¨¡è¼ƒå¤§çš„æµ·é®®å¸‚å ´ï¼Œé¸æ“‡æ›´å¤šå…ƒã€‚" },
            { name: "animateæœ­å¹Œ", category: "å‹•æ¼«é›»ç©", day: 4, description: "åŒ—æµ·é“æœ€å¤§çš„å‹•æ¼«å‘¨é‚Šå•†å“åº—ã€‚" },
            { name: "æœ­å¹ŒPARCO (JUMP SHOP)", category: "å‹•æ¼«é›»ç©", day: 4, description: "é›†çµJUMPç³»å‹•æ¼«å‘¨é‚Šçš„å°ˆè³£åº—ã€‚" },
            { name: "namco æ±æ€¥ç™¾è²¨åº—", category: "å‹•æ¼«é›»ç©", day: 6, description: "ä½æ–¼è»Šç«™æ—ç™¾è²¨å…§çš„éŠæˆ²ä¸­å¿ƒï¼Œæ‰­è›‹ç¨®é¡è±å¯Œã€‚" },
            { name: "namco æœ­å¹Œå·¥å» åº—", category: "å‹•æ¼«é›»ç©", day: 6, description: "ç©ºé–“å¯¬æ•çš„éŠæˆ²ä¸­å¿ƒï¼Œé©åˆå„å¹´é½¡å±¤ã€‚" },
            { name: "Bic Cameraæœ­å¹Œåº—", category: "3Cç”¢å“", day: 4, description: "å¤§å‹é›»å™¨é‡è²©åº—ï¼Œå•†å“ç¨®é¡é½Šå…¨ã€‚" },
            { name: "Yodobashi Camera", category: "3Cç”¢å“", day: 4, description: "å¦ä¸€å®¶å¤§å‹é›»å™¨é‡è²©åº—ï¼Œå¯äº’ç›¸æ¯”è¼ƒåƒ¹æ ¼ã€‚" },
            { name: "æœ­å¹Œè»Šç«™å‘¨é‚Šå•†å ´", category: "è³¼ç‰©", day: 6, description: "å¤§ä¸¸ç™¾è²¨ã€JR Towerç­‰ï¼Œè³¼ç‰©é¸æ“‡å¤šã€‚" },
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const itineraryContainer = document.getElementById('itinerary-container');
            const interestLocationsContainer = document.getElementById('interest-locations-container');
            const mainNav = document.getElementById('main-nav');
            const viewSections = document.querySelectorAll('.view-section');
            const interestFilters = document.getElementById('interest-filters');

            function renderItinerary() {
                itineraryContainer.innerHTML = itineraryData.map(day => `
                    <div class="day-card bg-white rounded-2xl shadow-md border-l-4 ${day.themeColor} overflow-hidden cursor-pointer" data-day="${day.day}">
                        <div class="p-4 sm:p-6 flex justify-between items-center">
                            <div>
                                <p class="text-sm font-semibold text-teal-600">ç¬¬ ${day.day} å¤©</p>
                                <h3 class="text-lg font-bold mt-1">${day.title}</h3>
                            </div>
                            <div class="text-2xl text-stone-400 transform transition-transform duration-300">
                                <span>â–¼</span>
                            </div>
                        </div>
                        <div class="day-card-content">
                            <div class="px-4 sm:px-6 pb-6 pt-2 border-t border-stone-100">
                                ${day.activities.map(activity => `
                                    <div class="mt-4">
                                        <h4 class="font-bold text-md text-teal-700">${activity.title}</h4>
                                        <p class="text-sm text-stone-600 mt-1">${activity.description}</p>
                                        <div class="mt-3 bg-stone-50 p-3 rounded-lg">
                                            <div class="transport-toggles mb-2 flex border border-stone-200 rounded-md text-xs w-full sm:w-auto">
                                                <button class="transport-toggle transport-toggle-active flex-1 py-1 px-3" data-day="${day.day}" data-activity-title="${activity.title}" data-type="public">ğŸšŒ å…¬å…±é‹è¼¸</button>
                                                <button class="transport-toggle flex-1 py-1 px-3" data-day="${day.day}" data-activity-title="${activity.title}" data-type="taxi">ğŸš• è¨ˆç¨‹è»Š</button>
                                            </div>
                                            <div class="transport-details text-sm text-stone-700">
                                                <span class="font-mono">${activity.transport.public.icon}</span> ${activity.transport.public.details}
                                            </div>
                                        </div>
                                        ${activity.note ? `<p class="text-xs text-rose-600 mt-2 bg-rose-50 p-2 rounded-md">âš ï¸ **æ³¨æ„:** ${activity.note}</p>` : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            function renderInterestLocations(filter = 'all') {
                const filteredLocations = filter === 'all' 
                    ? locationsData 
                    : locationsData.filter(loc => loc.category === filter);

                interestLocationsContainer.innerHTML = filteredLocations.map(loc => `
                    <div class="bg-white rounded-2xl shadow-md p-6 border border-stone-200 hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                        <h3 class="font-bold text-lg text-teal-800">${loc.name}</h3>
                        <p class="text-sm text-stone-500 mt-1">Day ${loc.day} | ${loc.category}</p>
                        <p class="text-sm text-stone-600 mt-3">${loc.description}</p>
                    </div>
                `).join('');
            }

            function handleViewChange(view) {
                viewSections.forEach(section => section.classList.add('hidden'));
                document.getElementById(`${view}-section`).classList.remove('hidden');

                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('nav-btn-active'));
                document.querySelector(`.nav-btn[data-view="${view}"]`).classList.add('nav-btn-active');
            }

            itineraryContainer.addEventListener('click', (e) => {
                const dayCard = e.target.closest('.day-card');
                if (dayCard) {
                    dayCard.classList.toggle('open');
                    const arrow = dayCard.querySelector('.text-2xl span');
                    arrow.style.transform = dayCard.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
                }

                const toggleBtn = e.target.closest('.transport-toggle');
                if (toggleBtn) {
                    const { day, activityTitle, type } = toggleBtn.dataset;
                    const activity = itineraryData.find(d => d.day == day).activities.find(a => a.title === activityTitle);
                    
                    const parentToggles = toggleBtn.parentElement;
                    parentToggles.querySelectorAll('.transport-toggle').forEach(btn => btn.classList.remove('transport-toggle-active'));
                    toggleBtn.classList.add('transport-toggle-active');

                    const detailsDiv = parentToggles.nextElementSibling;
                    detailsDiv.innerHTML = `<span class="font-mono">${activity.transport[type].icon}</span> ${activity.transport[type].details}`;
                }
            });
            
            mainNav.addEventListener('click', (e) => {
                if (e.target.matches('.nav-btn')) {
                    handleViewChange(e.target.dataset.view);
                }
            });

            interestFilters.addEventListener('click', (e) => {
                if(e.target.matches('.interest-filter-btn')) {
                    const filter = e.target.dataset.filter;
                    renderInterestLocations(filter);
                    document.querySelectorAll('.interest-filter-btn').forEach(btn => {
                        btn.classList.remove('bg-teal-600', 'text-white');
                        btn.classList.add('bg-white', 'text-teal-700', 'border-teal-200');
                    });
                    e.target.classList.add('bg-teal-600', 'text-white');
                    e.target.classList.remove('bg-white', 'text-teal-700', 'border-teal-200');
                }
            });

            function renderChart() {
                const ctx = document.getElementById('travelTimeChart').getContext('2d');
                const labels = itineraryData.map(d => `ç¬¬ ${d.day} å¤©`);
                const data = itineraryData.map(d => d.travelTime.total);
                
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'æ¯æ—¥ç¸½äº¤é€šæ™‚é–“ (åˆ†é˜)',
                            data: data,
                            backgroundColor: 'rgba(20, 184, 166, 0.6)',
                            borderColor: 'rgba(13, 148, 136, 1)',
                            borderWidth: 1,
                            borderRadius: 8,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'æ™‚é–“ (åˆ†é˜)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.y !== null) {
                                            label += context.parsed.y + ' åˆ†é˜';
                                        }
                                        return label;
                                    },
                                    afterLabel: function(context) {
                                        const dayData = itineraryData[context.dataIndex];
                                        const breakdown = dayData.travelTime.breakdown;
                                        let breakdownString = '\næ™‚é–“åˆ†é…:';
                                        for (const [key, value] of Object.entries(breakdown)) {
                                            if (value > 0) {
                                               breakdownString += `\n- ${key}: ${value}åˆ†`;
                                            }
                                        }
                                        return breakdownString;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            renderItinerary();
            renderInterestLocations();
            renderChart();
        });
    </script>
</body>
</html>